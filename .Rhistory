coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.75, y = -8, ymax = -20, xmax = 1.25)+
annotation_custom(g2, x = 1.75, y = -8, ymax = -20, xmax = 2.25)
p1
ggsave("plt/Fymax_profile.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=Zzm,fill=as.factor(profile)))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(plot.margin = unit(c(0.3,0.3,0.8,0.3), "cm"),legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 16),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(2,25))+
labs( x="",y = expression(italic(F[Z][max])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
scale_color_manual(values = c("#636be1ff", "#d40000ff"),labels=c("Full slab","Throught"), name = "")+
scale_fill_manual(values = c("#636be1ff","#d40000ff"),labels=c("Full slab","Throught"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.84, y = -3, ymax = -0.5, xmax = 1.16)+
annotation_custom(g2, x = 1.84, y = -3, ymax = -0.5, xmax = 2.16)
p2
ggsave("plt/Fzmax_profile.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p3 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=Zz,fill=as.factor(profile)))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(plot.margin = unit(c(0.3,0.3,0.8,0.3), "cm"),legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 16),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(-95,0))+
labs( x="",y = expression(italic(F[Z][min])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
scale_color_manual(values = c("#636be1ff", "#d40000ff"),labels=c("Full slab","Throught"), name = "")+
scale_fill_manual(values = c("#636be1ff","#d40000ff"),labels=c("Full slab","Throught"), name = "")+
coord_cartesian(clip = 'off') +
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.86, y = -105, ymax = -115, xmax = 1.16)+
annotation_custom(g2, x = 1.86, y = -105, ymax = -115, xmax = 2.16)
p3
ggsave("plt/Fzmin_profile.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#patchwork <- p2+p3+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=25),text = element_text(size=25))
#ggsave("plt/Fzall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
# ####################################
# # Boxplots of res-angles between experiments without wood and with wood per profile
# ####################################
p1 <- ggplot(all_dat, aes(x=profile, y=angle_res,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
# coord_cartesian(clip = 'off') +
# annotation_custom(g1, x = 0.77, y = -86, ymax = -91, xmax = 1.23)+
# annotation_custom(g2, x = 1.77, y = -86, ymax = -91, xmax = 2.23)
#p1
#ggsave("plt/beta.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=profile, y=angle_y,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~~(t[F[Y~","~max]])~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
# coord_cartesian(clip = 'off') +
# annotation_custom(g1, x = 0.77, y = -86, ymax = -91, xmax = 1.23)+
# annotation_custom(g2, x = 1.77, y = -86, ymax = -91, xmax = 2.23)
# p2
# ggsave("plt/beta_1.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p3 <- ggplot(all_dat, aes(x=profile, y=angle_zm,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(0,30))+
labs( x="",y = expression(beta~~(t[F[Z~","~max]])~"[째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.84, y = -11, ymax = 1.03, xmax = 1.16)+
annotation_custom(g2, x = 1.84, y = -11, ymax = 1.03, xmax = 2.16)
#p3
#ggsave("plt/beta_2.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p4 <- ggplot(all_dat, aes(x=profile, y=angle_z,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-80,5))+
labs( x="",y = expression(beta~~(t[F[Z~","~min]])~"[째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.77, y = -91, ymax = -95, xmax = 1.23)+
annotation_custom(g2, x = 1.77, y = -91, ymax = -95, xmax = 2.23)
#p4
#ggsave("plt/beta_3.png", plot = p4, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
patchwork <- (p1+p2)/(p3+p4)+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=30),text = element_text(size=30))
ggsave("plt/betaall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
library("tidyverse")
library("patchwork")
library(png)
library(grid)
img1 <- readPNG("doc/symb/Full_slab.png")
g1<- rasterGrob(img1, interpolate=TRUE)
img2 <- readPNG("doc/symb/Trough.png")
g2<- rasterGrob(img2, interpolate=TRUE)
#data <- read.csv("dat/raw/data_all.csv")
#saveRDS(data, file = "dat/raw/data_all.rds")
all_dat <- read_rds("dat/raw/data_all.rds") |>
mutate(profile=recode_factor(profile,"1"="Full slab","4"="Trough"),
noWood=recode_factor(noWood,"0"="without wood","1"="with wood"))
p1 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=v, fill=as.factor(reorder(noWood, -Res)))) +
geom_boxplot(alpha=0.8) +
theme_bw() +
theme(
legend.position = "top",
legend.text = element_text(size = 20),
text = element_text(size = 20),
axis.title.y = element_text(angle = 90, vjust = 0.5, size = 20),
axis.title.x = element_blank(),
axis.text.x = element_blank(),
axis.title.y.right = element_text(angle = 0, vjust = 0.5)
) +
scale_y_continuous(breaks = scales::breaks_extended(n = 5)) +
labs(x = "", y = expression(italic(velocity) ~ " [m/s]")) +
geom_vline(aes(xintercept = 1.5), linetype = "dashed", colour = "black", size = 0.7) +
scale_fill_manual(values = c("#A27146", "#bdbdbd"), labels = c("with wood","without wood"), name = "")
p1
ggsave("plt/velo.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=h,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(
legend.position = "top",
legend.text = element_text(size = 20),
text = element_text(size = 20),
axis.title.y = element_text(angle = 90, vjust = 0.5, size = 20),
axis.title.x = element_blank(),
axis.text.x = element_blank(),
axis.title.y.right = element_text(angle = 0, vjust = 0.5)
) +
scale_y_continuous(breaks = scales::breaks_extended(n = 5))+
labs( x="",y = expression(italic(flow~depth)~" [mm]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("with wood","without wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
p2
ggsave("plt/height.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
library("tidyverse")
library("patchwork")
library(png)
library(grid)
img1 <- readPNG("doc/symb/Full_slab.png")
g1<- rasterGrob(img1, interpolate=TRUE)
img2 <- readPNG("doc/symb/Trough.png")
g2<- rasterGrob(img2, interpolate=TRUE)
#data <- read.csv("dat/raw/data_all.csv")
#saveRDS(data, file = "dat/raw/data_all.rds")
all_dat <- read_rds("dat/raw/data_all.rds") |>
mutate(profile=recode_factor(profile,"1"="Full slab","4"="Trough"),
noWood=recode_factor(noWood,"0"="without wood","1"="with wood"))
p1 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=v, fill=as.factor(reorder(noWood, -Res)))) +
geom_boxplot(alpha=0.8) +
theme_bw() +
theme(
legend.position = "top",
legend.text = element_text(size = 20),
text = element_text(size = 20),
axis.title.y = element_text(angle = 90, vjust = 0.5, size = 20),
axis.title.x = element_blank(),
axis.text.x = element_blank(),
axis.title.y.right = element_text(angle = 0, vjust = 0.5)
) +
scale_y_continuous(breaks = scales::breaks_extended(n = 5)) +
labs(x = "", y = expression(italic(velocity) ~ " [m/s]")) +
geom_vline(aes(xintercept = 1.5), linetype = "dashed", colour = "black", size = 0.7) +
scale_fill_manual(values = c("#A27146", "#bdbdbd"), labels = c("with wood","without wood"), name = "")
p1
ggsave("plt/front_velocity.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=as.factor(reorder(noWood, -Res)), y=h,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(
legend.position = "top",
legend.text = element_text(size = 20),
text = element_text(size = 20),
axis.title.y = element_text(angle = 90, vjust = 0.5, size = 20),
axis.title.x = element_blank(),
axis.text.x = element_blank(),
axis.title.y.right = element_text(angle = 0, vjust = 0.5)
) +
scale_y_continuous(breaks = scales::breaks_extended(n = 5))+
labs( x="",y = expression(italic(flow~depth)~" [mm]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("with wood","without wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
p2
ggsave("plt/flow_depth.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
library("tidyverse")
library("patchwork")
library(png)
library(grid)
img1 <- readPNG("doc/symb/Full_slab.png")
g1<- rasterGrob(img1, interpolate=TRUE)
img2 <- readPNG("doc/symb/Trough.png")
g2<- rasterGrob(img2, interpolate=TRUE)
#data <- read.csv("dat/raw/data_all.csv")
#saveRDS(data, file = "dat/raw/data_all.rds")
all_dat <- read_rds("dat/raw/data_all.rds") |>
mutate(profile=recode_factor(profile,"1"="Full slab","4"="Through"),
noWood=recode_factor(noWood,"0"="without wood","1"="with wood"))
# ####################################
# # Boxplots of residuals between experiments without wood and with wood per profile
# ####################################
# p1 <- ggplot(all_dat, aes(x=profile, y=Res,fill=as.factor(reorder(noWood, -Res))))+
#   geom_boxplot(alpha=0.8)+
#   theme_bw()+
#   theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
#   scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
#   labs( x="",y = expression(italic(F[F])~" [N]"))+
#   geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#   #scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("with wood","without wood"), name = "")+
#   scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
#   #coord_cartesian(clip = 'off') +
#   #annotation_custom(g1, x = 0.75, y = -10, ymax = -16, xmax = 1.25)+
#   #annotation_custom(g2, x = 1.75, y = -10, ymax = -16, xmax = 2.25)
# # p1
# #ggsave("plt/res.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#
#  p2 <- ggplot(all_dat, aes(x=profile, y=Resy,fill=as.factor(reorder(noWood, -Res))))+
#    geom_boxplot(alpha=0.8)+
#    theme_bw()+
#   theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
#    scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
#    labs( x="",y = bquote(italic(F[F]~~(t[F[Y~","~max]]))~" [N]"))+
#    geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#    #scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
#    scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
#    #coord_cartesian(clip = 'off') +
#    #annotation_custom(g1, x = 0.75, y = -10, ymax = -16, xmax = 1.25)+
#    #annotation_custom(g2, x = 1.75, y = -10, ymax = -16, xmax = 2.25)
# #p2
#  #ggsave("plt/res1.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#
#  p3 <- ggplot(all_dat, aes(x=profile, y=Reszm,fill=as.factor(reorder(noWood, -Res))))+
#    geom_boxplot(alpha=0.8)+
#    theme_bw()+
#    theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=25),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
#    scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
#    labs( x="",y = bquote(italic(F[F]~~(t[F[Z~","~max]]))~" [N]"))+
#    geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#    #scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
#    scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
#    coord_cartesian(clip = 'off') +
#    annotation_custom(g1, x = 0.75, y = -10, ymax = -16, xmax = 1.25)+
#    annotation_custom(g2, x = 1.75, y = -10, ymax = -16, xmax = 2.25)
#  #p3
#  #ggsave("plt/res2.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#
#  p4 <- ggplot(all_dat, aes(x=profile, y=Resz,fill=as.factor(reorder(noWood, -Res))))+
#    geom_boxplot(alpha=0.8)+
#    theme_bw()+
#    theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=25),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
#    scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
#    labs( x="",y = bquote(italic(F[F]~~(t[F[Z~","~min]]))~" [N]"))+
#    geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#    #scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
#    scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
#    coord_cartesian(clip = 'off') +
#    annotation_custom(g1, x = 0.75, y = -10, ymax = -16, xmax = 1.25)+
#    annotation_custom(g2, x = 1.75, y = -10, ymax = -16, xmax = 2.25)
#  #p4
#  #ggsave("plt/res3.png", plot = p4, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#  patchwork <- (p1+p2)/(p3+p4)+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=30),text = element_text(size=30))
#  ggsave("plt/resall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
# ####################################
# # Boxplots of maximum forces between experiments without wood and with wood per profile
# ####################################
p1 <- ggplot(all_dat, aes(x=profile, y=Yy,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
labs( x="",y = expression(italic(F[Y][max])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without woody debris","with woody debris"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.75, y = -8, ymax = -13, xmax = 1.25)+
annotation_custom(g2, x = 1.75, y = -8, ymax = -13, xmax = 2.25)
p1
ggsave("plt/Fymax.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=profile, y=Zzm,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(2,25))+
labs( x="",y = expression(italic(F[Z][max])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.84, y = -4, ymax = 2.03, xmax = 1.16)+
annotation_custom(g2, x = 1.84, y = -4, ymax = 2.03, xmax = 2.16)
p2
ggsave("plt/Fzmax.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p3 <- ggplot(all_dat, aes(x=profile, y=Zz,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(-95,0))+
labs( x="",y = expression(italic(F[Z][min])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("with wood","without wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.86, y = -102, ymax = -113, xmax = 1.16)+
annotation_custom(g2, x = 1.86, y = -102, ymax = -113, xmax = 2.16)
p3
ggsave("plt/Fzmin.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#patchwork <- p2+p3+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=25),text = element_text(size=25))
#ggsave("plt/Fzall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
# ####################################
# # Boxplots of res-angles between experiments without wood and with wood per profile
# ####################################
p1 <- ggplot(all_dat, aes(x=profile, y=angle_res,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
# coord_cartesian(clip = 'off') +
# annotation_custom(g1, x = 0.77, y = -86, ymax = -91, xmax = 1.23)+
# annotation_custom(g2, x = 1.77, y = -86, ymax = -91, xmax = 2.23)
#p1
#ggsave("plt/beta.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=profile, y=angle_y,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~~(t[F[Y~","~max]])~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
# coord_cartesian(clip = 'off') +
# annotation_custom(g1, x = 0.77, y = -86, ymax = -91, xmax = 1.23)+
# annotation_custom(g2, x = 1.77, y = -86, ymax = -91, xmax = 2.23)
# p2
# ggsave("plt/beta_1.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p3 <- ggplot(all_dat, aes(x=profile, y=angle_zm,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(0,30))+
labs( x="",y = expression(beta~~(t[F[Z~","~max]])~"[째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.84, y = -11, ymax = 1.03, xmax = 1.16)+
annotation_custom(g2, x = 1.84, y = -11, ymax = 1.03, xmax = 2.16)
#p3
#ggsave("plt/beta_2.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p4 <- ggplot(all_dat, aes(x=profile, y=angle_z,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position = "none",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 16),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-80,5))+
labs( x="",y = expression(beta~~(t[F[Z~","~min]])~"[째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.77, y = -91, ymax = -95, xmax = 1.23)+
annotation_custom(g2, x = 1.77, y = -91, ymax = -95, xmax = 2.23)
#p4
#ggsave("plt/beta_3.png", plot = p4, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
patchwork <- (p1+p2)/(p3+p4)+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=30),text = element_text(size=30))
ggsave("plt/betaall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
library("tidyverse")
library("patchwork")
library(png)
library(grid)
img1 <- readPNG("doc/symb/Full_slab.png")
g1<- rasterGrob(img1, interpolate=TRUE)
img2 <- readPNG("doc/symb/Trough.png")
g2<- rasterGrob(img2, interpolate=TRUE)
#data <- read.csv("dat/raw/data_all.csv")
#saveRDS(data, file = "dat/raw/data_all.rds")
all_dat <- read_rds("dat/raw/data_all.rds") %>%
mutate(profile=recode_factor(profile,"1"="Full slab","4"="Through"))%>%
arrange(Wood) %>%
mutate(Wood = factor(Wood, levels=c("10", "15", "20", "0")))
# ####################################
# # Boxplots of maximum forces between experiments without wood and with wood per profile
# ####################################
p1 <- ggplot(all_dat, aes(x=profile, y=Yy,fill=as.factor(Wood)))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(5,125))+
labs( x="",y = expression(italic(F[Y][max])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#fc4b0e","#fafa19","#0ebf4c","#bdbdbd"),labels=c("logs: 10 cm","logs: 15 cm","logs: 20 cm","no wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.75, y = -8, ymax = -13, xmax = 1.25)+
annotation_custom(g2, x = 1.75, y = -8, ymax = -13, xmax = 2.25)
p1
ggsave("plt/Fymax_logs.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=profile, y=Zzm,fill=as.factor(Wood)))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(2,25))+
labs( x="",y = expression(italic(F[Z][max])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#fc4b0e","#fafa19","#0ebf4c","#bdbdbd"),labels=c("logs: 10 cm","logs: 15 cm","logs: 20 cm","no wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.84, y = -4, ymax = 2.03, xmax = 1.16)+
annotation_custom(g2, x = 1.84, y = -4, ymax = 2.03, xmax = 2.16)
p2
ggsave("plt/Fzmax_logs.png", plot = p2, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p3 <- ggplot(all_dat, aes(x=profile, y=Zz,fill=as.factor(Wood)))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=20),text = element_text(size=20),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 20),axis.text.x = element_text(angle = 0,hjust = 0.5, vjust = 0.5),axis.title.x = element_text(vjust = 0.5,size = 20),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 5), limits = c(-95,0))+
labs( x="",y = expression(italic(F[Z][min])~" [N]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#fc4b0e","#fafa19","#0ebf4c","#bdbdbd"),labels=c("logs: 10 cm","logs: 15 cm","logs: 20 cm","no wood"), name = "")+
coord_cartesian(clip = 'off') +
annotation_custom(g1, x = 0.86, y = -102, ymax = -113, xmax = 1.16)+
annotation_custom(g2, x = 1.86, y = -102, ymax = -113, xmax = 2.16)
p3
ggsave("plt/Fzmin_logs.png", plot = p3, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
#patchwork <- p2+p3+ plot_layout(guides = 'collect') & theme(legend.position="top",legend.text=element_text(size=25),text = element_text(size=25))
#ggsave("plt/Fzall.png", plot = patchwork, device = png, height = 35, width = 45, dpi = 300, units = "cm")
# ####################################
# # Boxplots of res-angles between experiments without wood and with wood per profile
# ####################################
p1 <- ggplot(all_dat, aes(x=profile, y=angle_res,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#fc4b0e","#fafa19","#0ebf4c","#bdbdbd"),labels=c("log: 10 cm","log: 15 cm","log: 20 cm","no wood"), name = "")+
# coord_cartesian(clip = 'off') +
# annotation_custom(g1, x = 0.77, y = -86, ymax = -91, xmax = 1.23)+
# annotation_custom(g2, x = 1.77, y = -86, ymax = -91, xmax = 2.23)
#p1
#ggsave("plt/beta.png", plot = p1, device = png, height = 15, width = 22.5, dpi = 300, units = "cm")
p2 <- ggplot(all_dat, aes(x=profile, y=angle_y,fill=as.factor(reorder(noWood, -Res))))+
geom_boxplot(alpha=0.8)+
theme_bw()+
theme(legend.position="top",legend.text=element_text(size=16),text = element_text(size=16),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 25),axis.text.x = element_blank(),axis.title.x = element_blank(),axis.title.y.right = element_text(angle = 0, vjust = 0.5))+
scale_y_continuous(breaks = scales::breaks_extended(n = 8), limits = c(-75,20))+
labs( x="",y = expression(beta~~(t[F[Y~","~max]])~" [째]"))+
geom_vline(aes(xintercept=1.5),linetype="dashed",colour="black",size=0.7)+
#scale_color_manual(values = c("#bdbdbd", "#A27146"),labels=c("without wood","with wood"), name = "")+
scale_fill_manual(values = c("#A27146","#bdbdbd"),labels=c("with wood","without wood"), name = "")
## Korngroessen-Verteilung
## Daten einlesen-------------------------------------------------------------
granular <- read.csv("dat/raw/kornv/granular2024.csv",
header = T,
sep = ";",
dec = ",",
stringsAsFactors=FALSE)
granular.dm <- granular[1:25,1]
granular.proz <- granular[1:25,2]*100
granular <- data.frame(granular.dm,granular.proz)
## Plot-------------------------------------------------------------
library(ggplot2)
require(scales)
require(MASS)
# granular und viskos---------------
p1<- ggplot(data = granular,
aes(x = granular.dm, y=granular.proz))+
geom_line(aes(y=granular.proz),linetype=1,lwd=1,color = "black")+
#geom_line(aes(y=viskos.proz, color="seagreen4"),linetype=1,lwd=1)+
annotation_logticks(sides="b")+
scale_x_continuous(trans = 'log10',
breaks = c(0.0001,0.001,0.01,0.1,1,10,100),
labels = as.character(c(0.0001,0.001,0.01,0.1,1,10,100)))+
#scale_y_continuous(breaks = c(seq(0,1,0.1)))+
geom_vline(xintercept = c(0.002,0.063,2),linetype=3)+
geom_vline(xintercept = c(2,4,8,10,22.4),linetype=2)+
annotate(geom = "rect", xmin = 0.0002, xmax = 2, ymin = 0, ymax = 100,
fill = "#f0b27a", alpha = 0.4) +
annotate(geom = "rect", xmin = 2, xmax = 4, ymin = 0, ymax = 100,
fill = "#e59866", alpha = 0.4) +
annotate(geom = "rect", xmin = 4, xmax = 8, ymin = 0, ymax = 100,
fill = "#dc7633", alpha = 0.4) +
annotate(geom = "rect", xmin = 8, xmax = 10, ymin = 0, ymax = 100,
fill = "#ca6f1e", alpha = 0.5) +
annotate(geom = "rect", xmin = 10, xmax = 22.4, ymin = 0, ymax = 100,
fill = "#6e2c00", alpha = 0.5) +
theme_bw()+
theme(legend.position ="",panel.grid.minor.y=element_blank(),text = element_text(size=15),axis.title.y = element_text(angle = 90, vjust = 0.5,size = 15),axis.title.x = element_text(vjust = 0.5,size = 15))+
#guides(fill="legend")+
#scale_colour_manual(values=c("coral3","seagreen4"),name = "Legende",labels=c("granular","viskos"))+
labs(x = "Particle size [mm]", y = "Percent finer [%]")
p1
ggsave("plt/kv.png", plot = p1, device = png, height = 10, width = 16, dpi = 300, units = "cm")
